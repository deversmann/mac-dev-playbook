# code: language=ansible
---
- name: Configure host.
  hosts: all

  vars:
    configure_homebrew: true
    run_brew_bundle: false

    run_msc_installs: true

    configure_omz: true
    zsh_custom: "~/.oh-my-zsh-custom"
    zsh_theme: "dje"
    zsh_plugins: "git git-prompt virtualenv"

    msc_installs:
      - Cyberduck
      - GIMP
      - GitHubDesktop
      - GoogleDrive
      - GrandPerspective
      - Slack
      - TheUnarchiver
      - WindowsApp
      - Zoom.us

  tasks:
    - name: Configure passwordless sudo.
      ansible.builtin.lineinfile:
        path: "/etc/sudoers.d/{{ ansible_user_id }}"
        create: true
        line: "{{ ansible_user_id }} ALL=(ALL) NOPASSWD: ALL"
        mode: '0640'
        validate: '/usr/sbin/visudo -cf %s'
      become: true

    - name: Managed Software Center installs.
      ansible.builtin.import_role:
        name: deversmann.msc
      when: run_msc_installs

    - ansible.builtin.import_tasks: tasks/homebrew.yml
      when: configure_homebrew
      tags: ['homebrew']

    - ansible.builtin.import_tasks: tasks/omz.yml
      when: configure_omz
      tags: ['omz']

...